<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltip Test</title>
    <style>
        .form-group {
            margin: 20px 0;
        }
        
        .form-group label {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .info-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #6c757d;
            color: white;
            border: none;
            cursor: help;
            font-size: 11px;
            font-weight: bold;
            transition: background-color 0.3s ease;
            flex-shrink: 0;
            position: relative;
        }
        
        .info-btn:hover {
            background: #5a6268;
        }
        
        .tooltip {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            line-height: 1.4;
            white-space: nowrap;
            max-width: 300px;
            white-space: normal;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #2d3748;
        }
        
        .info-btn:hover .tooltip,
        .info-btn:focus .tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            width: 200px;
        }
    </style>
</head>
<body>
    <h1>Tooltip Test</h1>
    
    <div class="form-group">
        <label for="test1">Server Name:</label>
        <input type="text" id="test1" value="Test Server">
    </div>
    
    <div class="form-group">
        <label for="test2">Server IP:</label>
        <input type="text" id="test2" value="10.0.0.1/24">
    </div>
    
    <div class="form-group">
        <label for="test3">Listen Port:</label>
        <input type="number" id="test3" value="51820">
    </div>
    
    <script>
        function createInfoButton(tooltip) {
            const button = document.createElement('button');
            button.type = 'button';
            button.className = 'info-btn';
            button.innerHTML = '?';
            button.setAttribute('tabindex', '0');
            
            const tooltipDiv = document.createElement('div');
            tooltipDiv.className = 'tooltip';
            tooltipDiv.textContent = tooltip;
            
            button.appendChild(tooltipDiv);
            return button;
        }
        
        function addTooltipToElement(elementId, tooltipText) {
            const element = document.getElementById(elementId);
            if (!element) {
                console.warn(`Element with ID '${elementId}' not found`);
                return;
            }
            
            const formGroup = element.closest('.form-group');
            if (!formGroup) {
                console.warn(`Form group for element '${elementId}' not found`);
                return;
            }
            
            const label = formGroup.querySelector('label');
            if (!label) {
                console.warn(`Label for element '${elementId}' not found`);
                return;
            }
            
            // Check if tooltip already exists
            if (label.querySelector('.info-btn')) {
                return;
            }
            
            const infoBtn = createInfoButton(tooltipText);
            label.appendChild(infoBtn);
            console.log(`Tooltip added for ${elementId}`);
        }
        
        // Test tooltips
        document.addEventListener('DOMContentLoaded', function() {
            addTooltipToElement('test1', 'A descriptive name for your WireGuard server (used in configuration files and comments)');
            addTooltipToElement('test2', 'The internal IP address and subnet for the WireGuard interface (e.g., 10.0.0.1/24)');
            addTooltipToElement('test3', 'UDP port for WireGuard traffic. Default is 51820. Must be open in firewall.');
        });
    </script>
</body>
</html>